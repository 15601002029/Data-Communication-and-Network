---
tags:
  - 笔记
  - 考研
  - 计算机网络
---
# 数据链路层的基本概念
- 节点：主机、路由器
- 链路：网络中两个节点之间的**物理通道**，链路的传输介质主要有双绞线，光纤和微波。分为有线链路、无线链路。
- 数据链路：网络中两个节点之间的**逻辑通道**，把显示控制数据传输协议的硬件和软件加到链路上就构成数据链路。
- 帧：链路层的协议数据单元，封装网络层数据报。
数据链路层负责通过一条链路从一个节点向另一个物理链路直接相连的相邻节点传送数据报。
数据链路层在物理层提供服务的基础上**向网络层提供服务**，最基本的服务是将原子网络层来的数据可靠的传输到相邻节点的目标机网络层。其主要作用是**加强物理层传输原始比特流**的功能，将物理层提供的可能出错从物理连接改造为**逻辑上无差错的数据链路**，使之对网络层表现为一条无差错的链路。
- 功能一：为网络层提供服务。
	- 无确认无连接服务
	- 有确认无连接服务
	- 有确认面向连接服务：有链接一定有确认
- 链路管理：连接的建立、维持、释放（用于面向连接的服务）
- [[#封装成帧&透明传输|组帧]]
- 流量控制：控制发送方的发送速度
- 差错控制：帧错/位错
# 封装成帧&透明传输
## 封装成帧
- **封装成帧**就是在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。
- 首部和尾部包含许多控制信息，他们的一个重要作用：**帧定界（确定帧的界限）**
- 帧同步：接收方应当能从接收到的二进制比特流中区分出帧的起始和终止。
- 组帧的四种方法：
	- [[#字符计数法]]
	- 字符（节）填充法
	- 零比特填充法
	- 违规编码法
![[d515a656b1793ddb0fd7c713966298f.png]]
## 透明传输
- **透明传输**是指所传数据是什么样的比特组合，都应当能够在链路上传送。因此，链路层就不会识别有什么妨碍数据传输的东西。当所传数据的比特组合恰巧与某一个控制信息完全一样时，就必须采取适当的措施，使接收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的。
## 字符计数法
帧首部使用一个计数字段（第一个字节，八位）来标明帧内字符数。
![[d4eb4330c7959b4f35f00600837a7c1.png]]
问题：当首位出错时，就会对后方数据造成很大影响。
## 字符填充法
![[e85d7d96dd112958d08dd093978598e.png]]
- 当传送的帧是由文本文件组成时（文本文件的字符都是从键盘输入的，都是ASCII码）。不管从键盘上输入什么字符都可以放在帧里传输，即[[#透明传输]]
- 当传送的帧是由非ASCII码的文本文件组成时（二进制代码的程序或图像等），就要**采用字符填充方法实现透明传输。**
![[dc8bae7052e7eade23916052c3c85b8.png]]
- 在特殊位置前添加长度为一比特的转义字符，从而实现透明传输。
## 零比特填充法
![[8a175be9cf216963a518f5fe9c70dee.jpg]]
- 首部与尾部的二进制字段相同
- 操作：
	- 在发送端，扫描整个信息字段，只要连续5个1，就立即填入一个0
	- 在接收端收到一个帧时，先找到标志字段确定边界，再用硬件对比特流进行扫描。发现连续5个1时，就把后面的0删除。
- 保证了透明传输：在传输的比特流中可以传送任意比特组合，而不会引起对帧边界的判断错误。
## 违规编码法
- 用编码中不会用到的编码来定界帧的起始和终止。
# 差错控制 检错编码
## 差错成因
- 传输中的差错都是由噪声引起的
- **全局性**：由于线路本身电气特所产生的**随机噪声**（热噪声），是信道固有的，随即存在的。
- 提高信噪比来减少或避免干扰。（对传感器下手）
- **局部性**：外界特定的短暂的原因所造成的**冲击噪声**，是产生差错的主要原因。
- 通常利用编码技术来解决。
- 差错：
	- 位错
	- 帧错：丢失，重复，失序
## 数据链路层的差错控制
![[附录#^b2608e]]
### 检错编码
- 奇偶校验码
	n-1位信息元，1位校验元
	奇校验码：1的个数为奇数
	偶校验码：1的个数为偶数
	奇偶校验码的特点：
	- 只能检查出奇数个比特错误，检错能力为50%
- 循环冗余码CRC（普遍使用）
![[附录#^b9eb8b]] ^be9ad4
- 准备待传的有效数据
- 每个组都加上冗余码构成帧在发送
	- 模二的多项式除法本质上就是异或运算，相异为1，相同为0
	- 发送端发送的帧的最终结果为d+FCS
	- 注意：一个五位的生成多项式就是一个系数表示的x的多项式
	- $1*x^{4}+1*x^{3}+0*x^{2}+0*x^{1}+1*x^{0}$多项式的系数就是11001
![[77b3ac8ded5322a33a8b9ba7921c99a.png]]
- 接收方检验：
	- 余数为0则认为最正确接受
	- 余数不为0则丢弃
![[附录#^88cece]]
- 在数据链路层仅仅使用循环冗余检验CRC差错检测技术，只能做到对帧的无差错接收，接收端丢弃的帧虽然曾收到了，但是最终还是因为有差错还是因为有差错被丢弃。链路层使用CRC检验，能够实现无比特差错的传输，但这还不是可靠传输。
## 纠错编码 海明码
- 确定校验码位数r
	- 数据/信息有m位，冗余码/校验码有r位
	- 校验码一共有$2^{r}$种取值
	- $2^{r} \ge m+r+1$ 海明不等式
- 确定校验码和数据的位置
	- 校验码放在序号为$2^{n}$的位置，数据按序填上
	- 举例为D=1100 R=3的情况
	- 此时在$2^{0},2^{1},2^{2}$的位置放校验码
![[9b93b025a3f0cd2ba961cd43bd746d0.png]]
- 求出校验码的值
![[8ac595ede82e4277512447900fbcdbf.png]]
	题目默认偶校验，奇校验题目会说明
	在校验码的位置采用通配符，应该是从左到右一次从高位到低位，按照2的几次方运算
	将偶校验码填入相应位置就得出完整海明码
- 检错并纠错
	- 交错类似奇偶校验，只需要把相应位置的数据提取出来进行奇偶校验
	- 纠错方法：找到不满足校验的而非女足取交集，并与符合校验的组取差集
	- 法二：
![[35bc14f8666c5a60d88882417c7842c.png]]
	找到二进制对应的数即可
	把校验码对应位置的二进制数找出来，看新的校验码应该是多少
- **海明距离**
	- 两个合法编码的对应比特取值不同的比特数称为这两个码字的**海明距离（码距）**，一个有效编码集中，任意两个合法编码（码字）的海明距离的最小值称为该编码集的**海明距离（码距）**。
	- 检错d位，海明码d+1位
	- 纠错d位，海明码d+1位
# 链路层的流量控制
- 较高的发送速度和较低的接受能力不匹配，会造成传输出错
- 链路层的流量控制是点对点的，传输层的流量控制是端到端的；数据链路层的流量控制手段为接收方收不下就不回复确认，传输层的流量控制手段是接收端给发送端一个窗口公告。
## 流量控制方法
### [[#停止－等待协议]]
- 每发送完一个帧就停止发送，等待对方的确认，在收到确认后再发送下一个帧。
### 滑动窗口协议
- 退后N帧协议（GBN）
- 选择重传协议（SR）
### 可靠传输、滑动窗口、流量控制
- 可靠传输：发送端发啥，接收端收啥
- 流量控制：控制发送速率，使接受党有足够的缓冲空间来接收每一个帧
- 滑动窗口：解决流量控制（收不下就不给确认，想发也发不了）、可靠传输（发送方自动重传）
# 停止－等待协议
除了**比特出差错**，底层信道还会出现丢包问题。同时也需要实现流量控制。
简单且[[#信道利用率]]低
## 无差错情况
- 因为无差错且传输过程中存在停止－等待，因此只需要1比特位就可以实现对数据包的编码
![[68e4ea9d02b291204dc162d6e7c7352.png]]
## 有差错情况
- 1.数据帧丢失或检测到帧出错
	- 超时计时器：每次发送一个帧就启动一个计时器，超时计时器设置的重传时间应当比帧传输的平均RTT（往返传输时延）更长一些。
	- 发送完一个帧之后，必须保留它的副本，直到收到确认帧之后，才能将副本舍弃
	- 数据帧和确认帧必须编号
![[233f7ca97440a1ff0a89013b572c944.png]]
- 2.ACK（确认帧）丢失
	- 发送端此时没有收到确认帧，会默认发送帧丢失，自动重传，而接收端会收到两次相同编号的相同的帧，此时接收端会丢弃第二次接受到的帧并且再次发送确认帧
- 3.ACK迟到
	- 由于超时重传机制，在超时计时器发现规定时间内并未接受到确认帧后，会进行重传帧，而此时接收端因为已经接收到帧，会丢弃重复的帧并重传确认帧。因此发送方会先后接受到两个确认帧。发送方就可以在接收到第一个确认帧后就开始传输下一个帧，在收到第二个确认帧后丢弃即可。
![[382db15b63bba00e2dfb6cc9b001ad9.png]]
# 后退N帧协议（GBN协议）
## 后退N帧协议中的滑动窗口
- 发送窗口：发送方维持一组连续的允许发送帧的序号
![[5045c932f6edf2deada30d6c82e976d.png]]
- 接收窗口：发送方维持一组连续的允许接收帧的序号
## GBN发送方必须相应的三件事
- 上层的调用
	上层要发送数据时，发送方先检查发送窗口是否已满，如果**未满**，则产生一个帧将其发送；如果**已满**，发送方只需要将数据返回给上层，暗示窗口已满，上层等待后再发送（实际实现中，发送方可以缓存这些数据，窗口不满时再发送帧）。
- 收到了一个ACK
	GBN协议中，对n号帧的确认采用==累计确认==的方式，表明接收方已经收到n号帧和它之前的全部帧。
- 超时事件
	放出现丢失和时延过长时发送方的行为，就像在停等协议中一样，定时器会再次用于恢复数据或确认帧的丢失。如果出现超时，发送方重传所有已发送但未被确认的帧。
## GBN接收方要做的事
- 如果正确收到N号帧，并且按序，那么接收方为N帧发送一个ACK，并将该帧中的数据部分交付给上层。
- 其余情况都丢弃帧，并为最近接收的帧重新发送ACK，接收方无需缓存任何失序帧，只需要维护一个信息：expectedseqnum（下一个按序接收的帧序）
![[9a2bc76601e3426781bd601c849eaec.png]]
注意：
	在发送方收到接收方返回的确认帧后，才会将发送窗口向后移动
	每一个帧都有一个超时计时器
	出现超时后，发送方会重新发送所有未被确认的帧
## 滑动窗口长度
- 若采用n个比特对帧编号，那么发送窗口的尺寸$W_{T}$满足$1\le W_{T}\le 2^{n}-1$。
- 若发送窗口太大，就会使得接受啊发那个无法区别新帧和旧帧
# 选择重传协议（SR）
- 设置单个确认，加大接收窗口，设置接收缓存，缓存乱序到达的帧
## 选择重传协议中的滑动窗口
![[1727351889199.png]]
- 只要当位于下界的帧被确认之后，滑动窗才会右移
![[1727351992253.png]]
## SR发送方必须响应的三件事
- 上层的调用
	- 从上层收到序号后，SR发送方检查下一个可用于该帧的序号，如果序号位于发送窗口内，则发送数据帧；否则像GBN一样，要么缓存数据，要么返回给上层之后再传输
- 收到了一个ACK
	- 如果收到ACK，假如该帧序号在窗口内，则SR发送方将该帧标记为已接受。如果该帧序号是窗口的下界，则窗口向前移动到具有最小序号的未确认帧处，如果窗口移动了并且有序号在窗口内未发送，则发送这些帧
- 超时事件
	- 每个帧都有自己的超时计时器，一个超时事件发生后，只重传一个帧
## SR接收方要做的事
- 接收窗口内的帧
	- SR接收方将确认正确接收的帧而不管是否按序，失序的帧将被缓存，并返回给发送方一个该帧的确认帧，直到所有帧被收到，将收到的帧按序交付给上层，然后向前移动滑动窗口
	- 如果接收方接收到了序号窗口外的帧，就返回一个ACK：这是因为此时发送方未接收到接收方返回的ACK（ACK在发送过程中丢失等），所以接收方还不知道已经接收成功
## 滑动窗口长度
- 发送窗口最好等于接收窗口（大了会溢出，小了没意义）
- $W_{Tmax}=W_{Rmax}=2^{n-1}$ n为数据编号的比特位
# 介质访问控制-MAC协议
采取一定措施，使得两对节点之间的通信不会发生相互干扰
## 传输数据使用的两种链路
- 点对点链路：两个相邻节点通过一个链路相连，没有第三者，常用于广域网
- 广播式链路：所有主机共享通信介质。常用于局域网
	- 典型拓扑结构：总线型，星型（逻辑总线型）
## 静态划分信道-信道划分介质访问控制
- 将使用介质的每个设备与来自同一信道上的其他设备的**通信隔离开**，把*时域和频域资源*合理的分配给网络上的设备。
![[附录#^bb3f18]]
- 频分多路复用（FDM）
	- 在用户分配到一定的频带后，在通信过程中自始至终都占用这个频带。**频分复用的所有用户在同样的时间占用不同的带宽（频率带宽）资源。**
	- 充分利用传输介质带宽，系统效率较高
	- 由于技术比较成熟，实现也别叫容易
- 时分多路复用（TDM）
	- 将时间划分为一段段等长的时分复用帧（TDM帧），每一个时分复用的用户在每一个TDM帧中占用**固定序号的时隙**，所有用户轮流占用信道。
	- TDM帧是在物理层传送的比特流所划分的帧，标志一个周期。
- 改进时分复用-统计时分复用（STDM）
	- 每一个STDM帧中的时隙数小于连接在集中器上的用户数，各用户有了数据就随时发往集中器的输入缓存，然后集中器按顺序一次扫描输入缓存，然后集中器按顺序依次扫描输入缓存，把缓存中的输入数据放入STDM帧中，一个STDM帧满了就发出。**STDM帧不是固定分配时隙，而是动态按需分配。**
![[1727356137140.png]]
- 波分多路复用（WDM）
	- 在一根光纤当中传输多种不同波长的光信号，由于波长不同，所以光信号互不干扰
- 码分多路复用（CDM）
	- 码分多址（CDMA）是码分复用的一种方式
	- 1个比特分为多个码片/芯片（chip），每一个站点被指定一个唯一的m位芯片序列，发送1时发送芯片序列，发送0时发送芯片序列反码
![[1727356800066.png]]
## 动态划分信道
- 动态媒体接入/多点接入
- 特点：信道并非在用户通信时固定分配给用户
### 轮询访问介质访问控制-令牌传递协议
### 随机访问介质访问控制
所有用户可以随机发送信息，发送信息时占全部带宽
- ALOHA协议
	- 纯ALOHA协议
		- 不监听信道，不按时间槽发送，随即重发
		- 如果发生冲突，接收方就会检测出差错，然后不给予确认，发送方在一定时间内收不到确认帧就会判断发生冲突
		- 超时后等一随机时间再重传
	- 时隙ALIOHA协议
		- 把时间分成若干个相同个相同的时间片，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送
	- 1.纯ALOHA协议比时隙ALOHA协议吞吐量更低，效率更低
	- 2.纯ALOHA协议是想发就发，时隙ALOHA协议只有再时间片段开始时才能重发
- CSMA协议
	- 载波监听多路访问协议：
		- CS：载波侦听/监听。每一个站在发送数据之前要检测一下总线上是否有其他计算机在发送数据
		- MA：多点接入，表示计算机以多点接入的方式连接在一根总线上
		- 协议思想：发送帧之前，监听信道
		- 1-坚持CSMA
			- 坚持指的是对于监听信道忙之后的坚持
			- 如果一个主机要发送信息，那么它先监听信息，空闲则直接传输不比等待，忙则一直监听，直到空闲马上传输，如果有冲突（一段时间内未收到肯定回复），则等待一个随机长的时间再监听，重复上述过程
			- 优点：只要媒体空闲，站点就马上发送，避免了媒体利用率的损失
			- 缺点：假如有两个或两个以上的站点有数据要发送，冲突就不可避免
		- 非坚持CSMA
			- 对于监听信道忙之后就不继续监听
			- 如果一个主机要发送信息，那么它先监听信道，空闲则直接传输，不必等待，忙则等待一个随机时间之后再进行监听
			- 优点：采用随机的重发延迟时间，可以减少冲突发生的可能性
			- 缺点：可能存在大家都要延迟等待过程中，使得媒体可能存在空闲状态，降低信道利用率
		- p-坚持CSMA
			- p-坚持指的是对于监听信道空闲的处理
			- 如果一个主机要发送信息，那么它先监听信道。空闲则以p概率直接传输，不必等待；概率1-p等待到下一个时间槽再传输。忙则持续监听知道信道空闲再以p概率发送。若冲突则等到下一个时间槽开始再监听并重复上述过程。
- ==CSMA/CD协议==
	- 载波监听多点接入/碰撞检测（carrier sense multiple access with collision detection）
	- CS：载波侦听/监听，每一个站在**发送数据之前**以及**发送数据时**都要检测一下总线上是否有其他计算机在发送数据。
	- MA：多点接入，表示许多计算机以多点接入的方式连接在一根总线上。
	- CD：碰撞检测（冲突检测），“**边发送边监听**”，适配器边发送数据边检测信道上信号电压的变话情况，以便判断自己在发送数据时其他站是都也在发送数据。
	- 半双工网络：在一个网络上只能有一台计算机发送信息
	- 如何确定碰撞后的重传时机？
		- **二进制指数规避算法**：
		- 1.确定基本退避（推迟）时间为争用期$2\tau$。
		- 2.定义参数k，为**重传次数**，但k不超过10，即$k=min\left [ 重传次数，10 \right ]$。当重传次数不超过10次时，k为重传次数；当重传次数大于10时，k就不再增大，一直等于10。
		- 3.从离散的整数集合$r=min\left [ 0,1,2^{k}-1 \right ]$中随机取出一个数r，重传所需要退避的时间就是**r倍的基本退避时间**，即$2r\tau$。**注意**：这个离散的整数集合是从0-$2^{k-1}$的所有整数，即0，1，2，3，4，。。。
		- 4.当冲传达==16次==仍不能成功时，说明网络太拥挤，认为此帧永远无法正确发送，抛弃此帧并向高层报告出错。
	- **最小帧长问题**：帧的传播时延至少要两倍于信号在总线中的传播时延
		- 最小帧长=总线传播时延`*`数据传输速率`*`2
>[!nites] 最小帧长
>以太网规定的最短帧长为64B，凡是长度小于64B的都是由于冲突异常终止的无效帧。 ^61e56d
- ==CSMA/CA协议==
	- CA：碰撞避免
	- 工作原理：
		- 发送数据前，先检测信道是否空闲。
		- 空闲则发出==RTS（request to send）==，RTS包括发射端的地址，接收端的地址，下一份数据包将持续发送的时间等i西南西；信道忙则等待。
		- 接收端接收到RTS后，将相应CTS（clear to send）
		- 发送端收到CTS后，开始发送数据帧（同时预约信道：发送方告知其他站点自己要传多久数据）
		- 接收端收到数据帧后，将用[[#^be9ad4|循环冗余码]]来检验数据时候正确，正确则相应ACK帧。
		- 发送方接收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至贵姓重发次数（采用[[#^61e56d|二进制指数退避算法]]来进行随机的推迟时间）
### CSMA/CD与CSMA/CA的相同点与不同点
- 相同点：
	- CSMA/CD与CSMA/CA机制都从属于CSMA思路，核心都是**先听再说**。两种协议都是在接入信道之前先进行监听，当发现信道空闲后，在进行接入。
- 不同点：
	- 传输介质不同：CD用于总线式以太网（有线），CA用于无线局域网（无线）。
	- 载波检测方式不同：因为传输介质的不同，CD与CA协议的检测方式也不同。CD通过电缆中电压的变化检测，当数据发生碰撞是，电缆中的电压就会随着发生变化；而CA协议采用能量检测（ED）、载波检测（CS）和能量载波混合检测信道空闲的方式。
	- CD检测冲突，CA避免冲突，二者出现冲突后都会进行有上限的重传。
### 轮询协议
- 主节点轮流邀请从属节点发送数据。
- 问题：
	- 有轮询开销
	- 有等待延迟
	- 单点故障
### 令牌传递协议
![[1727765106531.png]]
- 令牌环网：逻辑上是环形结构，在物理上是星型结构
- TCU：一个特殊格式的MAC控制帧，不包含任何信息，控制信道的使用，确保同一时刻只有一个节点独占信道。
- 每个节点都可以在一定的时间内（令牌持有时间）获得发送数据的权利，并不是无限制的持有令牌
- 问题：
	- 令牌开销
	- 等待延迟
	- 单点故障
- 采用令牌传送方式的网络常用于**负载较重、通信量较大**的网络中。
# 局域网基本概念和体系结构
## 网络拓扑
- 星型拓扑
	- 集线器：n台设备就有n个链路相连
- **总线拓扑**
	- 可靠性高、网络节点间响应速率快、共享资源能力强、设备投入量少
- 环形拓扑
	- 不易扩展
	- 单点故障问题
	- 系统响应时间长
- 属性托盘
	- 易于扩展
	- 易于隔离故障
	- 单点故障
## 局域网传输介质
## 介质访问控制方法
- CSMA/CD：常用于总线型局域网
- 令牌总线：用于总线型局域网
	- 总线形或树型网络中的各个工作站按一定顺序形成一个逻辑环。只有令牌持有者才能控制总线，才有发送信息的能力。
- 令牌环：常用于环形局域网
## 局域网分类（按介质访问控制方法）
- 以太网：符合IEEE802.3系列标准规范。
- 令牌环网
- FDDI网：光纤分布式数据接口
- ATM网：单元交换技术，53字节的固定长度的单元
- 无线局域网：采用IEEE 802.11标准
## IEEE802标准
- 802.3：以太网介质访问控制协议
- 802.5：令牌环网介质访问控制协议
- 802.8：光纤技术
- 802.11：无线局域网访问控制协议
## MAC子层和LLC子层
- LLC负责识别网络层协议，然后对他们进行封装。
- MAC子层负责数据帧的封装/卸装，帧的寻址和识别，帧的接收与发送，链路的管理，帧的差错控制等。
# 以太网
## 10BASE-T以太网
- [[#以太网对有线传输介质的命名规则|10BASE-T]]是传送基带信号的双绞线以太网，T表示采用双绞线，现采用的是无屏蔽双绞线（UTP），传输速率是10Mb/s。
- 物理上采用星型拓扑，逻辑上总线型，每段双绞线最长为100米。
- 采用曼彻斯特编码
- 采用CSMA/CD协议
## 适配器与MAC地址
- 适配器上有处理器和存储器（包括RAM和ROM）
- ROM上有计算机硬件地址
## 以太网的MAC帧
最常用的MAC帧是以太网V2的格式
![[1727774024333.png]]
关于数据的长度：最长1500是数据报的最大长度，最短46是因为一个MAC帧的最短为64B，然后减去包含目的地址在内的所有零碎，最后就是46B。
# IEEE 802.11 -无线局域网
## 802.11的MAC帧头
![[1727849879263.png]]
- 发送端和接收端是基站的MAC地址
- 目的地址和源地址就是计算机的MAC地址
![[1727850242852.png]]
## 无线局域网
### 有固定基础设施无线局域网
![[1727850380097.png]]
有线和无线的结合
### 无固定基础设施无线局域网的自组织网络
![[1727850534379.png]]
# VLAN（虚拟局域网）
- 是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术，这些逻辑组有某些共同的需求，要求每个VLAN是一个单独的广播域/不同的子网。
## VLAN实现
- 基于端口的VLAN技术
- 基于MAC地址的VLAN技术
![[1727851643989.png]]
- A和E可以实现通信：
	- A把自己的数据帧发送到交换机，交换机在数据帧中加上标签“tag=1”，发送给交换机2，根据交换机2中的VLAN端口表，发现E是VLAN1中的主机，随后去掉标签帧，发送给E
- A不能和D、H实现通信：
	- 因为在交换机层会加上标签，交换机在查表后发现主机都是VLAN2中的，所以不能实现数据传输。
# 广域网及相关协议
## PPP协议
- 简单：对于链路层的帧，无需纠错，无需序号，无需流量控制
- 封装成帧：帧定界符
- 透明传输：与帧定界符一样比特组合的数据应该如何处理：一部线路用字节填充，同步线路用比特填充
- 多种网络层协议：封装的IP数据报可以采用多种协议
- 多种类型链路：串行/并行，同步/异步。。。
- 差错控制：错就丢弃
- 检测连接状态：链路是否工作正常
- 最大传送单元：数据部分最大长度MTU
- 网络层地址协商：知道通信双方的网络层地址
- 数据压缩协商
- 不支持多点线路
### 三个组成部分
- 一个将IP数据报封装到串行链路（同步/异步）的方法
- 链路控制协议LCP：建立并维护数据链路连接、**身份验证**
- 网络控制协议NCP：PPP协议可支持多种网络层协议，每个不同的网络层协议都需要一个相应的NCP来配置，为网络层协议建立和配置逻辑链接。
### PPP协议状态图
![[1727854735196.png]]
### PPP协议的帧格式
![[1727854828064.png]]
- 协议：标识信息部分是什么
## HDLC协议
- 高级数据链路控制协议
- HDLC站：主站、从站、复合站
![[1727855177032.png]]
## PPP协议&HDLC协议
- 只支持全双工链路
- 都可以实现透明传输。
- 都可以实现差错控制，但不纠正差错
# 链路层设备
## 物理层扩展以太网
- 采用光纤扩展以太网范围
- 将多个冲突域中的集线器用一个主干集线器连接形成一个新的冲突域
## 链路层以太网扩展
### 网桥
- 根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，并不像所有接口转发此帧，而是先检查此帧的目的MAC地址，然后再确定将该帧转发到哪一个接口，或者是把它丢弃（过滤）。
- 网桥优点：
	- 过滤通信量，增大吞吐量
	- 扩大了物理传输范围
	- 提高了可靠性
	- 可互联不同物理层，不同MAC子域不同速率的以太网
#### 透明网桥
- 以太网上的站点不知道所发送的帧将经过哪几个网桥，是一种即插即用的设备
- 自学习：网桥最初会生成一个空转发表，**自学习**就是指在通信过程中逐渐填充最初生成的空转发表
#### 源路由网桥
- 发送帧时，把详细的最佳路由信息放在帧的首部中
- 方法：源站以广播方式向欲通信的目的站发送一个发现帧
## 以太网交换机——多接口网桥
- 独占传输媒体带宽
- 直通式交换机
	- 查完目的地址立刻转发
	- 延迟小，可靠性低，无法支持具有不同速率的端口的交换
- 存储转发式交换机
	- 将帧放入高速缓存，并检查正确性，正确则转发，错误则丢去
	- 延迟大，可靠性高，可以支持具有不同速率的端口的交换
- 接交换机与网桥的自学习功能相同
- 交换机转发表会时刻更新
## 冲突域&广播域
- 冲突域：在用一个冲突域中的每一个节点都能收到被发送的帧。
- 网络中能接收任意设备发出的广播帧的所有设备的集合。